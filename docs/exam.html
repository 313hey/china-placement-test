<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>中文分级测评 | 答题</title>
  <style>
    :root{
      --bg:#f7f7f8;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --border:rgba(17,24,39,.10);
      --shadow:0 18px 50px rgba(0,0,0,.08);
      --radius:22px;

      --red:#e11d48;
      --red2:#ff2d55;
      --redDark:#be123c;
      --focus:rgba(225,29,72,.28);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Microsoft YaHei",Arial,sans-serif;
      background:
        radial-gradient(1100px 420px at 20% -10%, rgba(255,45,85,.18), transparent 65%),
        radial-gradient(900px 360px at 90% 0%, rgba(225,29,72,.14), transparent 55%),
        var(--bg);
      color:var(--text);
    }
    .wrap{max-width:980px;margin:0 auto;padding:18px 16px 40px;}
    .top{
      display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;
      margin-bottom:12px;
    }
    .title{display:flex;align-items:center;gap:12px}
    .logo{
      width:40px;height:40px;border-radius:14px;
      background:linear-gradient(135deg,var(--red2),var(--red));
      box-shadow:0 14px 32px rgba(225,29,72,.25);
      display:flex;align-items:center;justify-content:center;
      color:#fff;font-weight:900;
      user-select:none;
    }
    h1{margin:0;font-size:20px}
    .muted{color:var(--muted);font-size:14px;line-height:1.6}

    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 12px;border-radius:999px;
      border:1px solid var(--border);background:rgba(255,255,255,.85);
      font-size:13px;color:var(--muted);
    }
    .btn{
      padding:11px 14px;border-radius:16px;border:1px solid rgba(17,24,39,.14);
      background:#fff;cursor:pointer;font-size:14px;
      transition:transform .06s ease, background .15s ease, border-color .15s ease;
      user-select:none;
    }
    .btn:active{transform:translateY(1px)}
    .btnPrimary{
      background:linear-gradient(135deg,var(--red2),var(--red));
      border-color:transparent;color:#fff;font-weight:900;
      box-shadow:0 14px 26px rgba(225,29,72,.22);
    }
    .btnGhost:hover{border-color:rgba(225,29,72,.35)}

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
      margin:12px 0;
    }

    .tabs{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
    .tab{
      padding:9px 14px;border-radius:999px;border:1px solid rgba(17,24,39,.14);
      background:#fff;cursor:pointer;font-size:14px;font-weight:800;color:var(--text);
    }
    .tab.active{
      color:#fff;border-color:transparent;
      background:linear-gradient(135deg,var(--red2),var(--red));
      box-shadow:0 12px 22px rgba(225,29,72,.18);
    }

    .progressBar{height:10px;border-radius:999px;background:rgba(17,24,39,.08);overflow:hidden}
    .progressFill{height:100%;width:0%;background:linear-gradient(90deg,var(--red2),var(--red));}

    .navRow{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;margin-top:14px}

    .submitCard{
      background:linear-gradient(180deg, rgba(225,29,72,.06), rgba(225,29,72,.03));
      border:1px solid rgba(225,29,72,.18);
    }

    /* ===== Listening UI upgrade (A版) ===== */
    .qCard{
      padding:14px;
      border:1px solid rgba(17,24,39,.10);
      border-radius:18px;
      background:#fff;
    }
    .audioBar{ margin-top:10px; }
    .audioBar audio{ width:100%; }

    .panel{ margin-top:8px; }
    .panelTitle{
      font-weight:950;
      font-size:13px;
      color:rgba(17,24,39,.65);
      margin-bottom:8px;

      /* ✅ pill-like label */
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(17,24,39,.10);
      background:rgba(255,255,255,.82);
    }
    .stemMain{
      font-size:16px;
      font-weight:950;
      line-height:1.5;
      color:#111827;
      margin-top:6px;
    }
    .stemSub{
      margin-top:6px;
      font-size:13px;
      color:rgba(17,24,39,.55);
      line-height:1.55;
    }

    .optGrid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-top:10px;
    }
    @media (max-width:640px){
      .optGrid{ grid-template-columns:1fr; }
    }
    .optCard{
      text-align:left;
      border:1px solid rgba(17,24,39,.12);
      background:#fff;
      border-radius:16px;
      padding:12px;
      cursor:pointer;
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .optCard:hover{ border-color:rgba(225,29,72,.35); }
    .optCard.selected{
      border-color:rgba(225,29,72,.65);
      background:rgba(225,29,72,.07);
      box-shadow:0 0 0 4px rgba(225,29,72,.12);
    }
    .optLetter{
      width:30px;height:30px;
      border-radius:10px;
      display:flex;align-items:center;justify-content:center;
      font-weight:950;
      color:#111827;
      border:1px solid rgba(17,24,39,.12);
      background:#fafafa;
      flex:0 0 auto;
    }
    .optBody{ flex:1; min-width:0; }
    .optText{
      font-weight:900;
      line-height:1.45;
      color:#111827;
    }
    .optImg{
      margin-top:8px;
      max-width:100%;
      max-height:160px;
      border-radius:12px;
      border:1px solid rgba(17,24,39,.10);
      display:block;
    }

    .helpFold{
      margin-top:14px;
      border-top:1px dashed rgba(17,24,39,.18);
      padding-top:12px;
    }
    .helpFold summary{
      cursor:pointer;
      font-weight:950;
      color:rgba(17,24,39,.70);
      list-style:none;
    }
    .helpFold summary::-webkit-details-marker{display:none}
    .helpInner{ margin-top:10px; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="title">
        <div class="logo">测</div>
        <div>
          <h1>答题中</h1>
          <div class="muted">听力 → 第二大题（选择题）</div>
        </div>
      </div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
        <div class="pill" id="who"></div>
        <button class="btn btnGhost" id="backBtn">返回首页</button>
      </div>
    </div>

    <div class="card">
      <div class="tabs">
        <button class="tab" data-section="listening">听力</button>
        <button class="tab" data-section="reading">第二大题</button>
      </div>

      <div class="progressBar"><div id="progress" class="progressFill"></div></div>
      <div id="progressText" class="muted" style="margin-top:8px;">0 / 0</div>

      <div id="quizBox" style="margin-top:12px;"></div>

      <div class="navRow">
        <button id="prevBtn" class="btn btnGhost">上一题 / Previous</button>
        <button id="nextBtn" class="btn btnPrimary">下一题 / Next</button>
      </div>
    </div>

    <div class="card submitCard">
      <div class="muted">完成全部题目后，点击提交查看成绩。</div>
      <div style="margin-top:10px">
        <button id="submitBtn" class="btn btnPrimary">提交并出结果 / Submit</button>
      </div>
      <div id="submitTip" class="muted" style="margin-top:10px;"></div>
    </div>
  </div>

  <script src="./questions.js"></script>
  <script src="./app.js"></script>
</body>
</html>